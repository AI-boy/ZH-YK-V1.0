C51 COMPILER V9.01   KEY                                                                   03/20/2019 11:22:05 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE KEY
OBJECT MODULE PLACED IN ..\OBJ\key.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE ..\src\key.c LARGE BROWSE FLOATFUZZY(4) INCDIR(..\include;C:\Keil\C51\INC\S
                    -TC) DEBUG OBJECTEXTEND PRINT(.\key.lst) OBJECT(..\OBJ\key.obj)

line level    source

   1            
   2          //**--------------头文件-------------------------------------------------------
   3          #include "STC8.h"
   4          #include "intrins.h"
   5          
   6          #include <stdio.h>
   7          #include <string.h>
   8          
   9          #include "userdefine.h" 
  10          
  11          //**--------------全局变量-----------------------------------------------------
  12          
  13          //**--------------函数申明-----------------------------------------------------
  14          
  15          //**--------------函数定义-----------------------------------------------------
  16          
  17          
  18          KEY_STATE_NU  KEY_STATE =KEY_UP;
  19          
  20          KEY_VALUE_NU  KEY_VALUE =KNOP;
  21          
  22          
  23          unsigned char scan_key_time_count=0x00;
  24          
  25          unsigned char handle_scan_key_flag=0x00;
  26          
  27          unsigned char menu_index_q=0x00;
  28          
  29          unsigned char zhuangtai_cnt=0x00;
  30          
  31          unsigned char canshu_cnt = 0x00;
  32          
  33          unsigned char key1_time_count=0x00;
  34          
  35          unsigned char canshu_1_weizhi=0x00;
  36          
  37          unsigned char canshu_2_weizhi=0x00;
  38          
  39          unsigned char canshu_3_weizhi=0x00;
  40          
  41          unsigned char canshu_4_weizhi=0x00;
  42          
  43          unsigned char canshu_5_weizhi=0x00;
  44          
  45          unsigned char canshu_6_weizhi=0x00;
  46          
  47          unsigned char canshu_7_weizhi=0x00;
  48          
  49          unsigned char canshu_8_weizhi=0x00;
  50          
  51          unsigned char canshu_9_weizhi=0x00;
  52          
  53          unsigned char canshu_10_weizhi=0x00;
  54          
C51 COMPILER V9.01   KEY                                                                   03/20/2019 11:22:05 PAGE 2   

  55          unsigned char canshu_11_weizhi=0x00;
  56          
  57          unsigned char canshu_12_weizhi=0x00;
  58          
  59          unsigned char canshu_13_weizhi=0x00;
  60          
  61          unsigned char canshu_14_weizhi=0x00;
  62          
  63          unsigned char poll_time_enable=0x00;
  64          
  65          unsigned char poll_task_flag=0x00;
  66          
  67          unsigned int poll_time_count=0x00;
  68          
  69          unsigned char set_status=0x00;
  70          
  71          unsigned int work_mode=0x00;
  72          
  73          unsigned int day_index=0x00;
  74          
  75          bit    key1_status = 1;
  76          
  77          bit    key2_status = 1;
  78          
  79          bit    key3_status = 1;
  80          
  81          bit    key4_status = 1;
  82          
  83          bit    key5_status = 1;
  84          
  85          bit    key6_status = 1;
  86          
  87          bit    key7_status = 1;
  88          
  89          bit    key8_status = 1;
  90          
  91          bit    key9_status = 1;
  92          
  93          bit    key10_status = 1;
  94          
  95          bit    key11_status = 1;
  96          
  97          bit    key12_status = 1;
  98          
  99          
 100          /**********************************************************************
 101          *函数名称：init_key
 102          *描述：初始化按键KEY端口  设置为输入模式
 103          *返回类型：void
 104          *输入形参：void
 105          ***********************************************************************/
 106          void init_key(void)
 107          {
 108   1              set_io_mode(PORT2,5,Z_IN);   //K1
 109   1              set_io_mode(PORT2,4,Z_IN);   //K2
 110   1              set_io_mode(PORT2,3,Z_IN);   //K3
 111   1              set_io_mode(PORT2,2,Z_IN);   //K4
 112   1              set_io_mode(PORT2,1,Z_IN);   //K5
 113   1              set_io_mode(PORT4,2,Z_IN);   //K6 
 114   1              set_io_mode(PORT2,0,Z_IN);   //K7 
 115   1              set_io_mode(PORT4,1,Z_IN);   //K8 
 116   1              set_io_mode(PORT3,7,Z_IN);   //K9 
C51 COMPILER V9.01   KEY                                                                   03/20/2019 11:22:05 PAGE 3   

 117   1              set_io_mode(PORT3,6,Z_IN);   //K10
 118   1              set_io_mode(PORT5,1,Z_IN);   //K11 
 119   1              set_io_mode(PORT5,0,Z_IN);   //K12
 120   1      
 121   1      }
 122          
 123          /**********************************************************************
 124          *函数名称：scan_key_value
 125          *描述：扫描按键状态
 126          *返回类型：void
 127          *输入形参：void
 128          ***********************************************************************/
 129          void scan_key_value(void)
 130          {
 131   1              unsigned int key_temp;
 132   1              
 133   1              key_temp=0x00;
 134   1              
 135   1              key_temp=(key_temp<<1)|K1_GET;
 136   1              
 137   1              key_temp=(key_temp<<1)|K2_GET;
 138   1              
 139   1              key_temp=(key_temp<<1)|K3_GET;
 140   1              
 141   1              key_temp=(key_temp<<1)|K4_GET;
 142   1              
 143   1              key_temp=(key_temp<<1)|K5_GET;
 144   1              
 145   1              key_temp=(key_temp<<1)|K6_GET;
 146   1              
 147   1              key_temp=(key_temp<<1)|K7_GET;
 148   1              
 149   1              key_temp=(key_temp<<1)|K8_GET;
 150   1              
 151   1              key_temp=(key_temp<<1)|K9_GET;
 152   1              
 153   1              key_temp=(key_temp<<1)|K10_GET;
 154   1              
 155   1              key_temp=(key_temp<<1)|K11_GET;
 156   1              
 157   1              key_temp=(key_temp<<1)|K12_GET;
 158   1              
 159   1              switch(key_temp)
 160   1                {
 161   2                   case 0x0000: KEY_STATE =KEY_UP;break;
 162   2                   
 163   2                   case 0x0800: KEY_VALUE =K1;KEY_STATE =KEY_DOWN;break;  //K1 按键   “设置”--“开关”
 164   2              
 165   2                   case 0x0400: KEY_VALUE =K2;KEY_STATE =KEY_DOWN;break;  //K2 按键   “+”
 166   2               
 167   2                   case 0x0200: KEY_VALUE =K3;KEY_STATE =KEY_DOWN;break;  //K3 按键   “-”
 168   2              
 169   2                   case 0x0100: KEY_VALUE =K4;KEY_STATE =KEY_DOWN;break;  //K4 按键   “状态”
 170   2              
 171   2                   case 0x0080: KEY_VALUE =K5;KEY_STATE =KEY_DOWN;break;  //K5 按键   “参数”
 172   2               
 173   2                   case 0x0040: KEY_VALUE =K6;KEY_STATE =KEY_DOWN;break;  //K6 按键   “保存”
 174   2              
 175   2                   case 0x0020: KEY_VALUE =K7;KEY_STATE =KEY_DOWN;break;  //K7 按键   “监测”
 176   2                 
 177   2                   case 0x0010: KEY_VALUE =K8;KEY_STATE =KEY_DOWN;break;  //K8 按键   “设置”
 178   2               
C51 COMPILER V9.01   KEY                                                                   03/20/2019 11:22:05 PAGE 4   

 179   2                   case 0x0008: KEY_VALUE =K9;KEY_STATE =KEY_DOWN;break;  //K9 按键   “背光”
 180   2              
 181   2                   case 0x0004: KEY_VALUE =K10;KEY_STATE =KEY_DOWN;break; //K10 按键  “模式”
 182   2                   
 183   2                   case 0x0002: KEY_VALUE =K11;KEY_STATE =KEY_DOWN;break; //K11 按键  “充电”
 184   2              
 185   2                   case 0x0001: KEY_VALUE =K12;KEY_STATE =KEY_DOWN;break; //K12 按键  “放电”
 186   2              
 187   2                   default:  KEY_STATE =KEY_DOWN;break;
 188   2                  
 189   2                }
 190   1                
 191   1                        
 192   1                if(KEY_STATE==KEY_UP)    //按键上升沿有效
 193   1                  {
 194   2                    if(KEY_VALUE!=KNOP)  //释放按键
 195   2                     {
 196   3                               switch(KEY_VALUE)
 197   3                               {
 198   4                                              case K1:
 199   4                                                               //--------主菜单界面 menu
 200   4      
 201   4                                                              poll_time_enable=0x00;
 202   4                                                                       
 203   4                                                      poll_time_count=0x00;
 204   4                                                                      
 205   4                                                              poll_task_flag=0x00;
 206   4      
 207   4                                                              yuyan_cnt=yuyan_cnt+1;
 208   4      
 209   4                                                              yuyan_cnt=yuyan_cnt%2;
 210   4      
 211   4      
 212   4                                                              if(menu_index_q==0x01)
 213   4                                                              {
 214   5                                                                       clear_screen();
 215   5                                                               display_run_data();
 216   5                                                              }
 217   4                                                              else if(menu_index_q>=0x02)
 218   4                                                              {
 219   5                                                                      clear_screen();
 220   5                                                                      display_canshu();
 221   5                                                              }
 222   4      
 223   4                                                              break;
 224   4                                      case K9:LCD_LED_TOG; break;//LCD背光控制
 225   4                                      
 226   4                                      case K10:                                 //模式：自动模式、手动模式                                                    
 227   4                                                      work_mode^=0x01; 
 228   4                                                      
 229   4                                                      menu_index_q=0x01;  
 230   4                                                      
 231   4                                                      poll_time_enable=0x00; 
 232   4                                                                   
 233   4                                                              poll_time_count=0x00;
 234   4                                                                      
 235   4                                                              poll_task_flag=0x00;
 236   4                                                              
 237   4                                                              zhuangtai_cnt = 0x02;
 238   4                                                              
 239   4                                                                                                                      
 240   4                                                      if(work_mode==0x00)
C51 COMPILER V9.01   KEY                                                                   03/20/2019 11:22:05 PAGE 5   

 241   4                                                      {
 242   5                                                                                                                              
 243   5                                                              tx_frame_kind=0x06;
 244   5                                                              
 245   5                                                              uart2_tx_buf[0]=0x55;
 246   5                                                               
 247   5                                                                      uart2_tx_buf[1]=0xA6;
 248   5                                                                                                                       
 249   5                                                                      crc_data=crc16(&uart2_tx_buf[1],1);
 250   5                                                                                                                       
 251   5                                                                      uart2_tx_buf[2]=crc_data/256;
 252   5                                                                                                                       
 253   5                                                                      uart2_tx_buf[3]=crc_data%256;
 254   5                                                                                                                       
 255   5                                                                      uart2_tx_buf[4]=0xAA;
 256   5                                                                                                                       
 257   5                                                                      uart2_send_nbyte(uart2_tx_buf,5);
 258   5                                                                      
 259   5                                                              
 260   5                                                      }       
 261   4                                                              clear_screen();
 262   4                                                              display_run_data();
 263   4                                                              
 264   4                                                      break;
 265   4                                      
 266   4                                      
 267   4                                      case K11:       //-------手动充电模式                                                   
 268   4                                                      if(work_mode==0x01)
 269   4                                                      {
 270   5                                                              menu_index_q=0x01;   
 271   5                                                              
 272   5                                                              poll_time_enable=0x00;
 273   5                                                                   
 274   5                                                                  poll_time_count=0x00;
 275   5                                                                      
 276   5                                                                      poll_task_flag=0x00;                                                            
 277   5                                                                      
 278   5                                                              tx_frame_kind=0x04;
 279   5                                                              
 280   5                                                              uart2_tx_buf[0]=0x55;
 281   5                                                               
 282   5                                                                      uart2_tx_buf[1]=0xA4;
 283   5                                                                                                                       
 284   5                                                                      crc_data=crc16(&uart2_tx_buf[1],1);
 285   5                                                                                                                       
 286   5                                                                      uart2_tx_buf[2]=crc_data/256;
 287   5                                                                                                                       
 288   5                                                                      uart2_tx_buf[3]=crc_data%256;
 289   5                                                                                                                       
 290   5                                                                      uart2_tx_buf[4]=0xAA;
 291   5                                                                                                                       
 292   5                                                                      uart2_send_nbyte(uart2_tx_buf,5);
 293   5                                                                      
 294   5                                                                      clear_screen();
 295   5                                                              display_run_data();
 296   5                                                      }       
 297   4                                                      break;//充电
 298   4                                      
 299   4                                      case K12:       //-------手动放电模式
 300   4                                                      
 301   4                                                      if(work_mode==0x01)
 302   4                                                      {
C51 COMPILER V9.01   KEY                                                                   03/20/2019 11:22:05 PAGE 6   

 303   5                                                              menu_index_q=0x01;   
 304   5                                                              
 305   5                                                              poll_time_enable=0x00;
 306   5                                                                   
 307   5                                                                  poll_time_count=0x00;
 308   5                                                                      
 309   5                                                                      poll_task_flag=0x00;
 310   5                                                                                                                                                                                              
 311   5                                                              tx_frame_kind=0x05;
 312   5                                                              
 313   5                                                              uart2_tx_buf[0]=0x55;
 314   5                                                               
 315   5                                                                      uart2_tx_buf[1]=0xA5;
 316   5                                                                                                                       
 317   5                                                                      crc_data=crc16(&uart2_tx_buf[1],1);
 318   5                                                                                                                       
 319   5                                                                      uart2_tx_buf[2]=crc_data/256;
 320   5                                                                                                                       
 321   5                                                                      uart2_tx_buf[3]=crc_data%256;
 322   5                                                                                                                       
 323   5                                                                      uart2_tx_buf[4]=0xAA;
 324   5                                                                                                                       
 325   5                                                                      uart2_send_nbyte(uart2_tx_buf,5);
 326   5                                                                      
 327   5                                                                      clear_screen();
 328   5                                                              display_run_data();
 329   5                                                      }
 330   4                                                      break;//放电
 331   4                                      
 332   4                                      case K7:                    //轮询读取控制器运行数据
 333   4                                                      menu_index_q    = 0x01; 
 334   4                                                      
 335   4                                                      poll_time_enable= 0x01;
 336   4                                                      
 337   4                                                      //zhuangtai_cnt = 0x01;            //---caiwk-2018-6-20
 338   4                                                      
 339   4                                                      //--------------------------------------------
 340   4                                                      clear_screen();
 341   4                                                      display_run_data();
 342   4                                                      //-------------------------------------------
 343   4                                                      break;
 344   4                                      
 345   4                                      case K6:  //---------------------------------------------------参数保存  发送参数到控制器
 346   4                                                      {
 347   5                                                                       menu_index_q=0x02;             
 348   5                                                                       
 349   5                                                                       poll_time_enable=0x00;
 350   5                                                                       
 351   5                                                                       poll_time_count=0x00;
 352   5                                                                      
 353   5                                                                               poll_task_flag=0x00;
 354   5                                                                               
 355   5                                                                               
 356   5                                                                               //canshu_cnt = 1;
 357   5                                                                               //--------------------------------------------
 358   5                                                                               
 359   5                                                                               save_sys_parameter();
 360   5                                                                               
 361   5                                                                               //-----------------------------------------------
 362   5                                                                               clear_screen();
 363   5                                                                               display_canshu();
 364   5                                                                               //----------------------------------------------
C51 COMPILER V9.01   KEY                                                                   03/20/2019 11:22:05 PAGE 7   

 365   5                                                      }
 366   4                                                      
 367   4                                                      break;
 368   4                                      
 369   4                                      case K4:                //-----------------------------------------------读取控制器"运行数据"
 370   4                                                      {
 371   5                                                                   menu_index_q=0x01;   
 372   5                                                                   
 373   5                                                                   poll_time_count=0x00;
 374   5                                                                      
 375   5                                                                       poll_task_flag=0x00;
 376   5                                                                       
 377   5                                                                       //--------------------------------------------
 378   5                                                                      
 379   5                                                                       read_run_data();
 380   5                                                                       
 381   5                                                                       //--------------------------------------------
 382   5                                                                       
 383   5                                                                       zhuangtai_cnt = zhuangtai_cnt+1;
 384   5                                                                       
 385   5                                                                       zhuangtai_cnt = zhuangtai_cnt%4;
 386   5                                                                       
 387   5                                                                       clear_screen();
 388   5                                                               display_run_data();
 389   5                                                                       
 390   5                                                              }
 391   4                                                              
 392   4                                                              break;
 393   4                                                              
 394   4                                               case K5:       //------------------------------------------------读取控制器"系统参数"
 395   4                                                              {
 396   5                                                                               menu_index_q=0x02;             
 397   5                                                                               
 398   5                                                                               poll_time_enable=0x00;
 399   5                                                                       
 400   5                                                                       poll_time_count=0x00;
 401   5                                                                      
 402   5                                                                               poll_task_flag=0x00;
 403   5                                                                               
 404   5                                                                               //--------------------------------------
 405   5                                                                               
 406   5                                                                               read_sys_parameter();
 407   5                                                                               
 408   5                                                                               //----------------------------------------
 409   5                                                                               
 410   5                                                                               canshu_cnt = canshu_cnt+1;
 411   5                                                                               
 412   5                                                                               canshu_cnt = canshu_cnt%3;
 413   5                                                                               
 414   5                                                                               //--------------------------------------显示参数界面
 415   5                                                                               
 416   5                                                                               clear_screen();
 417   5                                                                               display_canshu();
 418   5                                                                               
 419   5                                                                               
 420   5                                                                               
 421   5                                                              }
 422   4                                                              
 423   4                                                              break;
 424   4                                                              
 425   4                                               case K8:                                                                //按键 "设置"
 426   4                                                                      if(menu_index_q==0x02)
C51 COMPILER V9.01   KEY                                                                   03/20/2019 11:22:05 PAGE 8   

 427   4                                                                      {
 428   5                                                                                      menu_index_q=0x03;       //所要修改数字位置跳变
 429   5                                                                                      
 430   5                                                                                      if(canshu_cnt==1)
 431   5                                                                                      {
 432   6                                                                                              canshu_1_weizhi=0x00;
 433   6                                                                                      }
 434   5                                                                                      else if(canshu_cnt==2)
 435   5                                                                                      {
 436   6                                                                                              canshu_5_weizhi=0x00;
 437   6                                                                                      }
 438   5                                                                                      else
 439   5                                                                                      {
 440   6                                                                                              canshu_11_weizhi=0x00;
 441   6                                                                                      }
 442   5                                                                              
 443   5                                                                              
 444   5                                                                      }
 445   4                                                                      else if(menu_index_q==0x03)
 446   4                                                                      {
 447   5                                                                                                                                                      
 448   5                                                                                      if(canshu_cnt==1)
 449   5                                                                                      {
 450   6                                                                                              canshu_1_weizhi++;
 451   6                                                                                              
 452   6                                                                                              if(light_pv>=1000)
 453   6                                                                                              {
 454   7                                                                                                      canshu_1_weizhi=canshu_1_weizhi%4;
 455   7                                                                                              }
 456   6                                                                                              else
 457   6                                                                                              {
 458   7                                                                                                      canshu_1_weizhi=canshu_1_weizhi%3;
 459   7                                                                                              }
 460   6                                                                                      }
 461   5                                                                                      else if(canshu_cnt==2)
 462   5                                                                                      {
 463   6                                                                                              canshu_5_weizhi++;
 464   6                                                                                                                                                                                      
 465   6                                                                                              if(step_02_load_percent>=10)
 466   6                                                                                              {
 467   7                                                                                                      canshu_5_weizhi=canshu_5_weizhi%2;
 468   7                                                                                              }
 469   6                                                                                              else
 470   6                                                                                              {
 471   7                                                                                                      canshu_5_weizhi=canshu_5_weizhi%1;
 472   7                                                                                              }
 473   6                                                                                              
 474   6                                                                                      }
 475   5                                                                                      else
 476   5                                                                                      {
 477   6                                                                                              canshu_11_weizhi++;
 478   6                                                                                              
 479   6                                                                                              if(step_05_load_percent>=10)
 480   6                                                                                              {
 481   7                                                                                                      canshu_11_weizhi=canshu_11_weizhi%2;
 482   7                                                                                              }
 483   6                                                                                              else
 484   6                                                                                              {
 485   7                                                                                                      canshu_11_weizhi=canshu_11_weizhi%1;
 486   7                                                                                              }
 487   6                                                                                      }
 488   5                                                                                                                                                              
C51 COMPILER V9.01   KEY                                                                   03/20/2019 11:22:05 PAGE 9   

 489   5                                                                              
 490   5                                                                      }
 491   4                                                                      else if(menu_index_q==0x04)
 492   4                                                                      {
 493   5                                                                                              menu_index_q=0x05;      //所要修改数字位置跳变
 494   5                                                                                              
 495   5                                                                                              if(canshu_cnt==1)
 496   5                                                                                              {
 497   6                                                                                                      canshu_2_weizhi=0x00;
 498   6                                                                                              }
 499   5                                                                                              else if(canshu_cnt==2)
 500   5                                                                                              {
 501   6                                                                                                      canshu_6_weizhi=0x00;
 502   6                                                                                              }
 503   5                                                                                              else
 504   5                                                                                              {
 505   6                                                                                                      canshu_12_weizhi=0x00;
 506   6                                                                                              }
 507   5                                                                      }
 508   4                                                                      else if(menu_index_q==0x05)
 509   4                                                                      {
 510   5                                                                                      if(canshu_cnt==1)
 511   5                                                                                      {
 512   6                                                                                              canshu_2_weizhi++;
 513   6                                                                                              
 514   6                                                                                              if(load_cc_I>=1000)
 515   6                                                                                              {
 516   7                                                                                                      canshu_2_weizhi=canshu_2_weizhi%4;
 517   7                                                                                              }
 518   6                                                                                              else
 519   6                                                                                              {
 520   7                                                                                                      canshu_2_weizhi=canshu_2_weizhi%3;
 521   7                                                                                              }
 522   6                                                                                      }
 523   5                                                                                      else if(canshu_cnt==2)
 524   5                                                                                      {
 525   6                                                                                              canshu_6_weizhi++;
 526   6                                                                                              
 527   6                                                                                              if(step_02_time_limit>=10)
 528   6                                                                                              {
 529   7                                                                                                      canshu_6_weizhi=canshu_6_weizhi%2;
 530   7                                                                                              }
 531   6                                                                                              else
 532   6                                                                                              {
 533   7                                                                                                      canshu_6_weizhi=canshu_6_weizhi%1;
 534   7                                                                                              }
 535   6                                                                                      }
 536   5                                                                                      else
 537   5                                                                                      {
 538   6                                                                                              canshu_12_weizhi++;
 539   6                                                                                              
 540   6                                                                                              if(step_05_time_limit>=10)
 541   6                                                                                              {
 542   7                                                                                                      canshu_12_weizhi=canshu_12_weizhi%2;
 543   7                                                                                              }
 544   6                                                                                              else
 545   6                                                                                              {
 546   7                                                                                                      canshu_12_weizhi=canshu_12_weizhi%1;
 547   7                                                                                              }
 548   6                                                                                      }
 549   5                                                                                      
 550   5                                                                                      
C51 COMPILER V9.01   KEY                                                                   03/20/2019 11:22:05 PAGE 10  

 551   5                                                                      }
 552   4                                                                      else if(menu_index_q==0x06)
 553   4                                                                      {
 554   5                                                                              menu_index_q=0x07;      //所要修改数字位置跳变
 555   5                                                                              
 556   5                                                                              if(canshu_cnt==1)
 557   5                                                                              {
 558   6                                                                                      canshu_3_weizhi=0x00;
 559   6                                                                              }
 560   5                                                                              else if(canshu_cnt==2)
 561   5                                                                              {
 562   6                                                                                      canshu_7_weizhi=0x00;
 563   6                                                                              }
 564   5                                                                              else
 565   5                                                                              {
 566   6                                                                                      canshu_13_weizhi=0x00;
 567   6                                                                              }
 568   5                                                                      }
 569   4                                                                      else if(menu_index_q==0x07)
 570   4                                                                      {
 571   5                                                                              if(canshu_cnt==1)
 572   5                                                                              {
 573   6                                                                                      canshu_3_weizhi++;
 574   6                                                                                      
 575   6                                                                                      if(step_01_load_percent>=10)
 576   6                                                                                      {
 577   7                                                                                              canshu_3_weizhi=canshu_3_weizhi%2;
 578   7                                                                                      }
 579   6                                                                                      else
 580   6                                                                                      {
 581   7                                                                                              canshu_3_weizhi=canshu_3_weizhi%1;
 582   7                                                                                      }
 583   6                                                                              }
 584   5                                                                              else if(canshu_cnt==2)
 585   5                                                                              {
 586   6                                                                                      canshu_7_weizhi++;
 587   6                                                                                      
 588   6                                                                                      if(step_03_load_percent>=10)
 589   6                                                                                      {
 590   7                                                                                              canshu_7_weizhi=canshu_7_weizhi%2;
 591   7                                                                                      }
 592   6                                                                                      else
 593   6                                                                                      {
 594   7                                                                                              canshu_7_weizhi=canshu_7_weizhi%1;
 595   7                                                                                      }
 596   6                                                                              }
 597   5                                                                              else
 598   5                                                                              {
 599   6                                                                                      canshu_13_weizhi++;
 600   6                                                                                      
 601   6                                                                                      if(bt_id>=10)
 602   6                                                                                      {
 603   7                                                                                              canshu_13_weizhi=canshu_13_weizhi%2;
 604   7                                                                                      }
 605   6                                                                                      else
 606   6                                                                                      {
 607   7                                                                                              canshu_13_weizhi=canshu_13_weizhi%1;
 608   7                                                                                      }
 609   6                                                                              }                                                                                                                                                                                                                       
 610   5                                                                              
 611   5                                                                      }
 612   4                                                                      else if(menu_index_q==0x08)
C51 COMPILER V9.01   KEY                                                                   03/20/2019 11:22:05 PAGE 11  

 613   4                                                                      {
 614   5                                                                              menu_index_q=0x09;      //所要修改数字位置跳变
 615   5                                                                              
 616   5                                                                              if(canshu_cnt==1)
 617   5                                                                              {
 618   6                                                                                      canshu_4_weizhi=0x00;
 619   6                                                                              }
 620   5                                                                              else if(canshu_cnt==2)
 621   5                                                                              {
 622   6                                                                                      canshu_8_weizhi=0x00;
 623   6                                                                              }
 624   5                                                                              else
 625   5                                                                              {
 626   6                                                                                      canshu_14_weizhi=0x00;
 627   6                                                                              }
 628   5                                                                      }
 629   4                                                                      else if(menu_index_q==0x09)
 630   4                                                                      {
 631   5                                                                              if(canshu_cnt==1)
 632   5                                                                              {
 633   6                                                                                      canshu_4_weizhi++;
 634   6                                                                                      
 635   6                                                                                      if(step_01_time_limit>=10)
 636   6                                                                                      {
 637   7                                                                                              canshu_4_weizhi=canshu_4_weizhi%2;
 638   7                                                                                      }
 639   6                                                                                      else
 640   6                                                                                      {
 641   7                                                                                              canshu_4_weizhi=canshu_4_weizhi%1;
 642   7                                                                                      }
 643   6                                                                              }
 644   5                                                                              else if(canshu_cnt==2)
 645   5                                                                              {
 646   6                                                                                      canshu_8_weizhi++;
 647   6                                                                                      
 648   6                                                                                      if(step_03_time_limit>=10)
 649   6                                                                                      {
 650   7                                                                                              canshu_8_weizhi=canshu_8_weizhi%2;
 651   7                                                                                      }
 652   6                                                                                      else
 653   6                                                                                      {
 654   7                                                                                              canshu_8_weizhi=canshu_8_weizhi%1;
 655   7                                                                                      }
 656   6                                                                              }
 657   5                                                                              else
 658   5                                                                              {
 659   6                                                                                      canshu_14_weizhi++;
 660   6                                                                                      
 661   6                                                                                      if(light_time>=10)
 662   6                                                                                      {
 663   7                                                                                              canshu_14_weizhi=canshu_14_weizhi%2;
 664   7                                                                                      }
 665   6                                                                                      else
 666   6                                                                                      {
 667   7                                                                                              canshu_14_weizhi=canshu_14_weizhi%1;
 668   7                                                                                      }
 669   6                                                                              }                                                                                                                                                                                                                       
 670   5                                                                              
 671   5                                                                      }
 672   4                                                                      else if(menu_index_q==10)
 673   4                                                                      {
 674   5                                                                              menu_index_q=11;      //所要修改数字位置跳变
C51 COMPILER V9.01   KEY                                                                   03/20/2019 11:22:05 PAGE 12  

 675   5                                                                              
 676   5                                                                              if(canshu_cnt==1)
 677   5                                                                              {
 678   6                                                                                      canshu_1_weizhi=0x00;
 679   6                                                                              }
 680   5                                                                              else if(canshu_cnt==2)
 681   5                                                                              {
 682   6                                                                                      canshu_9_weizhi=0x00;
 683   6                                                                              }
 684   5                                                                              else
 685   5                                                                              {
 686   6                                                                                      canshu_11_weizhi=0x00;
 687   6                                                                              }
 688   5                                                                      }
 689   4                                                                      else if(menu_index_q==11)
 690   4                                                                      {
 691   5                                                                              if(canshu_cnt==1)
 692   5                                                                              {
 693   6                                                                                      canshu_1_weizhi++;
 694   6                                                                                      
 695   6                                                                                      if(light_pv>=1000)
 696   6                                                                                      {
 697   7                                                                                              canshu_1_weizhi=canshu_1_weizhi%4;
 698   7                                                                                      }
 699   6                                                                                      else
 700   6                                                                                      {
 701   7                                                                                              canshu_1_weizhi=canshu_1_weizhi%3;
 702   7                                                                                      }
 703   6                                                                              }
 704   5                                                                              else if(canshu_cnt==2)
 705   5                                                                              {
 706   6                                                                                      canshu_9_weizhi++;
 707   6                                                                                      
 708   6                                                                                      if(step_04_load_percent>=10)
 709   6                                                                                      {
 710   7                                                                                              canshu_9_weizhi=canshu_9_weizhi%2;
 711   7                                                                                      }
 712   6                                                                                      else
 713   6                                                                                      {
 714   7                                                                                              canshu_9_weizhi=canshu_9_weizhi%1;
 715   7                                                                                      }
 716   6                                                                              }
 717   5                                                                              else
 718   5                                                                              {
 719   6                                                                                      canshu_11_weizhi++;
 720   6                                                                                      
 721   6                                                                                      if(step_05_load_percent>=10)
 722   6                                                                                      {
 723   7                                                                                              canshu_11_weizhi=canshu_11_weizhi%2;
 724   7                                                                                      }
 725   6                                                                                      else
 726   6                                                                                      {
 727   7                                                                                              canshu_11_weizhi=canshu_11_weizhi%1;
 728   7                                                                                      }
 729   6                                                                              }                                                                                                                                                                                                                       
 730   5                                                                              
 731   5                                                                      }
 732   4                                                                      else if(menu_index_q==12)
 733   4                                                                      {
 734   5                                                                              menu_index_q=13;      //所要修改数字位置跳变
 735   5                                                                              
 736   5                                                                              if(canshu_cnt==1)
C51 COMPILER V9.01   KEY                                                                   03/20/2019 11:22:05 PAGE 13  

 737   5                                                                              {
 738   6                                                                                      canshu_2_weizhi=0x00;
 739   6                                                                              }
 740   5                                                                              else if(canshu_cnt==2)
 741   5                                                                              {
 742   6                                                                                      canshu_10_weizhi=0x00;
 743   6                                                                              }
 744   5                                                                              else
 745   5                                                                              {
 746   6                                                                                      canshu_12_weizhi=0x00;
 747   6                                                                              }
 748   5                                                                      }
 749   4                                                                      else if(menu_index_q==13)
 750   4                                                                      {
 751   5                                                                              if(canshu_cnt==1)
 752   5                                                                              {
 753   6                                                                                      canshu_2_weizhi++;
 754   6                                                                                      
 755   6                                                                                      if(load_cc_I>=1000)
 756   6                                                                                      {
 757   7                                                                                              canshu_2_weizhi=canshu_2_weizhi%4;
 758   7                                                                                      }
 759   6                                                                                      else
 760   6                                                                                      {
 761   7                                                                                              canshu_2_weizhi=canshu_2_weizhi%3;
 762   7                                                                                      }
 763   6                                                                              }
 764   5                                                                              else if(canshu_cnt==2)
 765   5                                                                              {
 766   6                                                                                      canshu_10_weizhi++;
 767   6                                                                                      
 768   6                                                                                      if(step_04_time_limit>=10)
 769   6                                                                                      {
 770   7                                                                                              canshu_10_weizhi=canshu_10_weizhi%2;
 771   7                                                                                      }
 772   6                                                                                      else
 773   6                                                                                      {
 774   7                                                                                              canshu_10_weizhi=canshu_10_weizhi%1;
 775   7                                                                                      }
 776   6                                                                              }
 777   5                                                                              else
 778   5                                                                              {
 779   6                                                                                      canshu_12_weizhi++;
 780   6                                                                                      
 781   6                                                                                      if(step_05_time_limit>=10)
 782   6                                                                                      {
 783   7                                                                                              canshu_12_weizhi=canshu_12_weizhi%2;
 784   7                                                                                      }
 785   6                                                                                      else
 786   6                                                                                      {
 787   7                                                                                              canshu_12_weizhi=canshu_12_weizhi%1;
 788   7                                                                                      }
 789   6                                                                              }                                                                                                                                                                                                                       
 790   5                                                                              
 791   5                                                                      }
 792   4                                                               break;
 793   4                                                              
 794   4                                               case K2:   // "+"
 795   4                                                                      
 796   4                                                                      if(menu_index_q==0x01 && zhuangtai_cnt==0x00)
 797   4                                                                      {
 798   5                                                                              day_index = day_index + 1;
C51 COMPILER V9.01   KEY                                                                   03/20/2019 11:22:05 PAGE 14  

 799   5                                                                              
 800   5                                                                              day_index = day_index%8;
 801   5                                                                      }
 802   4                                                              
 803   4                                                                      if(menu_index_q==0x03)   //参数1设置  光控电压
 804   4                                                                      {
 805   5                                                                                      if(canshu_cnt==1)
 806   5                                                                                      {
 807   6                                                                                                      switch(canshu_1_weizhi)
 808   6                                                                                                      {
 809   7                                                                                                              case 0:         
 810   7                                                                                                                              if(light_pv<=9998)
 811   7                                                                                                                              {
 812   8                                                                                                                                      light_pv = light_pv + 1 ;       
 813   8                                                                                                                              }
 814   7                                                                                                                              break;
 815   7                                                                                                              case 1:         
 816   7                                                                                                                              if(light_pv<=9989)
 817   7                                                                                                                              {
 818   8                                                                                                                                      light_pv = light_pv + 10        ;       
 819   8                                                                                                                              }
 820   7                                                                                                                              break;  
 821   7                                                                                                              case 2:         
 822   7                                                                                                                              if(light_pv<=9899)
 823   7                                                                                                                              {
 824   8                                                                                                                                      light_pv = light_pv + 100       ;       
 825   8                                                                                                                              }
 826   7                                                                                                                              break;
 827   7                                                                                                              case 3:         
 828   7                                                                                                                              if(light_pv<=8999)
 829   7                                                                                                                              {
 830   8                                                                                                                                      light_pv = light_pv + 1000;     
 831   8                                                                                                                              }
 832   7                                                                                                                              break;
 833   7                                                                                                              default:break;
 834   7                                                                                                      }       
 835   6                                                                                      }
 836   5                                                                                      else if(canshu_cnt==2)
 837   5                                                                                      {
 838   6                                                                                              switch(canshu_5_weizhi)
 839   6                                                                                                      {
 840   7                                                                                                              case 0:         
 841   7                                                                                                                              if(step_02_load_percent<=99)
 842   7                                                                                                                              {
 843   8                                                                                                                                      step_02_load_percent = step_02_load_percent + 1 ;       
 844   8                                                                                                                              }
 845   7                                                                                                                              break;
 846   7                                                                                                              case 1:         
 847   7                                                                                                                              if(step_02_load_percent<=89)
 848   7                                                                                                                              {
 849   8                                                                                                                                      step_02_load_percent = step_02_load_percent + 10        ;       
 850   8                                                                                                                              }
 851   7                                                                                                                              break;  
 852   7                                                                                                              default:break;
 853   7                                                                                                      }       
 854   6                                                                                      }
 855   5                                                                                      else
 856   5                                                                                      {
 857   6                                                                                              switch(canshu_11_weizhi)
 858   6                                                                                                      {
 859   7                                                                                                              case 0:         
 860   7                                                                                                                              if(step_05_load_percent<=99)
C51 COMPILER V9.01   KEY                                                                   03/20/2019 11:22:05 PAGE 15  

 861   7                                                                                                                              {
 862   8                                                                                                                                      step_05_load_percent = step_05_load_percent + 1 ;       
 863   8                                                                                                                              }
 864   7                                                                                                                              break;
 865   7                                                                                                              case 1:         
 866   7                                                                                                                              if(step_05_load_percent<=89)
 867   7                                                                                                                              {
 868   8                                                                                                                                      step_05_load_percent = step_05_load_percent + 10        ;       
 869   8                                                                                                                              }
 870   7                                                                                                                              break;  
 871   7                                                                                                              default:break;
 872   7                                                                                                      }
 873   6                                                                                      }
 874   5                                                                              
 875   5                                                                      
 876   5                                                                      }
 877   4                                                                      else if(menu_index_q==0x05)   //参数2设置  负载电流
 878   4                                                                      {
 879   5                                                                                      if(canshu_cnt==1)
 880   5                                                                                      {
 881   6                                                                                              switch(canshu_2_weizhi)
 882   6                                                                                              {
 883   7                                                                                                      case 0:         
 884   7                                                                                                                      if(load_cc_I<=9998)
 885   7                                                                                                                      {
 886   8                                                                                                                              load_cc_I = load_cc_I + 1       ;       
 887   8                                                                                                                      }
 888   7                                                                                                                      break;
 889   7                                                                                                      case 1:         
 890   7                                                                                                                      if(load_cc_I<=9989)
 891   7                                                                                                                      {
 892   8                                                                                                                              load_cc_I = load_cc_I + 10      ;       
 893   8                                                                                                                      }
 894   7                                                                                                                      break;  
 895   7                                                                                                      case 2:         
 896   7                                                                                                                      if(load_cc_I<=9899)
 897   7                                                                                                                      {
 898   8                                                                                                                              load_cc_I = load_cc_I + 100     ;       
 899   8                                                                                                                      }
 900   7                                                                                                                      break;
 901   7                                                                                                      case 3:         
 902   7                                                                                                                      if(load_cc_I<=8999)
 903   7                                                                                                                      {
 904   8                                                                                                                              load_cc_I = load_cc_I + 1000;   
 905   8                                                                                                                      }
 906   7                                                                                                                      break;
 907   7                                                                                                      default:break;
 908   7                                                                                              }       
 909   6                                                                                      }
 910   5                                                                                      else if(canshu_cnt==2)
 911   5                                                                                      {
 912   6                                                                                              switch(canshu_6_weizhi)
 913   6                                                                                              {
 914   7                                                                                                      case 0:         
 915   7                                                                                                                      if(step_02_time_limit<=23)
 916   7                                                                                                                      {
 917   8                                                                                                                              step_02_time_limit = step_02_time_limit + 1     ;       
 918   8                                                                                                                      }
 919   7                                                                                                                      break;
 920   7                                                                                                      case 1:         
 921   7                                                                                                                      if(step_02_time_limit<=13)
 922   7                                                                                                                      {
C51 COMPILER V9.01   KEY                                                                   03/20/2019 11:22:05 PAGE 16  

 923   8                                                                                                                              step_02_time_limit = step_02_time_limit + 10    ;       
 924   8                                                                                                                      }
 925   7                                                                                                                      break;
 926   7                                                              
 927   7                                                                                                      default:break;
 928   7                                                                                              }
 929   6                                                                                      }
 930   5                                                                                      else
 931   5                                                                                      {
 932   6                                                                                              switch(canshu_12_weizhi)
 933   6                                                                                              {
 934   7                                                                                                      case 0:         
 935   7                                                                                                                      if(step_05_time_limit<=23)
 936   7                                                                                                                      {
 937   8                                                                                                                              step_05_time_limit = step_05_time_limit + 1     ;       
 938   8                                                                                                                      }
 939   7                                                                                                                      break;
 940   7                                                                                                      case 1:         
 941   7                                                                                                                      if(step_05_time_limit<=13)
 942   7                                                                                                                      {
 943   8                                                                                                                              step_05_time_limit = step_05_time_limit + 10    ;       
 944   8                                                                                                                      }
 945   7                                                                                                                      break;
 946   7                                                              
 947   7                                                                                                      default:break;
 948   7                                                                                              }
 949   6                                                                                      }
 950   5                                                                                      
 951   5                                                                      
 952   5                                                                      }
 953   4                                                                      else if(menu_index_q==0x07)   //参数3设置  节能输出百分比
 954   4                                                                      {
 955   5                                                                                      if(canshu_cnt==1)
 956   5                                                                                      {
 957   6                                                                                              switch(canshu_3_weizhi)
 958   6                                                                                              {
 959   7                                                                                                      case 0:         
 960   7                                                                                                                      if(step_01_load_percent<=99)
 961   7                                                                                                                      {
 962   8                                                                                                                              step_01_load_percent = step_01_load_percent + 1 ;       
 963   8                                                                                                                      }
 964   7                                                                                                                      break;
 965   7                                                                                                      case 1:         
 966   7                                                                                                                      if(step_01_load_percent<=89)
 967   7                                                                                                                      {
 968   8                                                                                                                              step_01_load_percent = step_01_load_percent + 10        ;       
 969   8                                                                                                                      }
 970   7                                                                                                                      break;  
 971   7                                                                                              
 972   7                                                                                                      default:break;
 973   7                                                                                              }
 974   6                                                                                      }
 975   5                                                                                      else if(canshu_cnt==2)
 976   5                                                                                      {
 977   6                                                                                              switch(canshu_7_weizhi)
 978   6                                                                                              {
 979   7                                                                                                      case 0:         
 980   7                                                                                                                      if(step_03_load_percent<=99)
 981   7                                                                                                                      {
 982   8                                                                                                                              step_03_load_percent = step_03_load_percent + 1 ;       
 983   8                                                                                                                      }
 984   7                                                                                                                      break;
C51 COMPILER V9.01   KEY                                                                   03/20/2019 11:22:05 PAGE 17  

 985   7                                                                                                      case 1:         
 986   7                                                                                                                      if(step_03_load_percent<=89)
 987   7                                                                                                                      {
 988   8                                                                                                                              step_03_load_percent = step_03_load_percent + 10        ;       
 989   8                                                                                                                      }
 990   7                                                                                                                      break;  
 991   7                                                                                              
 992   7                                                                                                      default:break;
 993   7                                                                                              }
 994   6                                                                                      }
 995   5                                                                                      else
 996   5                                                                                      {
 997   6                                                                                              switch(canshu_13_weizhi)
 998   6                                                                                              {
 999   7                                                                                                      case 0:         
1000   7                                                                                                                      if(bt_id<=59)
1001   7                                                                                                                      {
1002   8                                                                                                                              bt_id = bt_id + 1       ;       
1003   8                                                                                                                      }
1004   7                                                                                                                      break;
1005   7                                                                                                      case 1:         
1006   7                                                                                                                      if(bt_id<=49)
1007   7                                                                                                                      {
1008   8                                                                                                                              bt_id = bt_id + 10      ;       
1009   8                                                                                                                      }
1010   7                                                                                                                      break;  
1011   7                                                                                              
1012   7                                                                                                      default:break;
1013   7                                                                                              }       
1014   6                                                                                      }
1015   5                                                                                      
1016   5                                                                      
1017   5                                                                      }
1018   4                                                                      else if(menu_index_q==0x09)   //参数3设置  节能输出百分比
1019   4                                                                      {
1020   5                                                                                      if(canshu_cnt==1)
1021   5                                                                                      {
1022   6                                                                                              switch(canshu_4_weizhi)
1023   6                                                                                              {
1024   7                                                                                                      case 0:         
1025   7                                                                                                                      if(step_01_time_limit<=23)
1026   7                                                                                                                      {
1027   8                                                                                                                              step_01_time_limit = step_01_time_limit + 1     ;       
1028   8                                                                                                                      }
1029   7                                                                                                                      break;
1030   7                                                                                                      case 1:         
1031   7                                                                                                                      if(step_01_time_limit<=13)
1032   7                                                                                                                      {
1033   8                                                                                                                              step_01_time_limit = step_01_time_limit + 10    ;       
1034   8                                                                                                                      }
1035   7                                                                                                                      break;  
1036   7                                                                                              
1037   7                                                                                                      default:break;
1038   7                                                                                              }
1039   6                                                                                      }
1040   5                                                                                      else if(canshu_cnt==2)
1041   5                                                                                      {
1042   6                                                                                              switch(canshu_8_weizhi)
1043   6                                                                                              {
1044   7                                                                                                      case 0:         
1045   7                                                                                                                      if(step_03_time_limit<=23)
1046   7                                                                                                                      {
C51 COMPILER V9.01   KEY                                                                   03/20/2019 11:22:05 PAGE 18  

1047   8                                                                                                                              step_03_time_limit = step_03_time_limit + 1     ;       
1048   8                                                                                                                      }
1049   7                                                                                                                      break;
1050   7                                                                                                      case 1:         
1051   7                                                                                                                      if(step_03_time_limit<=13)
1052   7                                                                                                                      {
1053   8                                                                                                                              step_03_time_limit = step_03_time_limit + 10    ;       
1054   8                                                                                                                      }
1055   7                                                                                                                      break;  
1056   7                                                                                              
1057   7                                                                                                      default:break;
1058   7                                                                                              }
1059   6                                                                                      }
1060   5                                                                                      else
1061   5                                                                                      {
1062   6                                                                                              switch(canshu_14_weizhi)
1063   6                                                                                              {
1064   7                                                                                                      case 0:         
1065   7                                                                                                                      if(light_time<=59)
1066   7                                                                                                                      {
1067   8                                                                                                                              light_time = light_time + 1     ;       
1068   8                                                                                                                      }
1069   7                                                                                                                      break;
1070   7                                                                                                      case 1:         
1071   7                                                                                                                      if(light_time<=49)
1072   7                                                                                                                      {
1073   8                                                                                                                              light_time = light_time + 10    ;       
1074   8                                                                                                                      }
1075   7                                                                                                                      break;  
1076   7                                                                                              
1077   7                                                                                                      default:break;
1078   7                                                                                              }       
1079   6                                                                                      }
1080   5                                                                                      
1081   5                                                                      
1082   5                                                                      }
1083   4                                                                      else if(menu_index_q==11)   //参数3设置  节能输出百分比
1084   4                                                                      {
1085   5                                                                                      if(canshu_cnt==1)
1086   5                                                                                      {
1087   6                                                                                              switch(canshu_1_weizhi)
1088   6                                                                                                      {
1089   7                                                                                                              case 0:         
1090   7                                                                                                                              if(light_pv<=9998)
1091   7                                                                                                                              {
1092   8                                                                                                                                      light_pv = light_pv + 1 ;       
1093   8                                                                                                                              }
1094   7                                                                                                                              break;
1095   7                                                                                                              case 1:         
1096   7                                                                                                                              if(light_pv<=9989)
1097   7                                                                                                                              {
1098   8                                                                                                                                      light_pv = light_pv + 10        ;       
1099   8                                                                                                                              }
1100   7                                                                                                                              break;  
1101   7                                                                                                              case 2:         
1102   7                                                                                                                              if(light_pv<=9899)
1103   7                                                                                                                              {
1104   8                                                                                                                                      light_pv = light_pv + 100       ;       
1105   8                                                                                                                              }
1106   7                                                                                                                              break;
1107   7                                                                                                              case 3:         
1108   7                                                                                                                              if(light_pv<=8999)
C51 COMPILER V9.01   KEY                                                                   03/20/2019 11:22:05 PAGE 19  

1109   7                                                                                                                              {
1110   8                                                                                                                                      light_pv = light_pv + 1000;     
1111   8                                                                                                                              }
1112   7                                                                                                                              break;
1113   7                                                                                                              default:break;
1114   7                                                                                                      }
1115   6                                                                                      }
1116   5                                                                                      else if(canshu_cnt==2)
1117   5                                                                                      {
1118   6                                                                                              switch(canshu_9_weizhi)
1119   6                                                                                              {
1120   7                                                                                                      case 0:         
1121   7                                                                                                                      if(step_04_load_percent<=99)
1122   7                                                                                                                      {
1123   8                                                                                                                              step_04_load_percent = step_04_load_percent + 1 ;       
1124   8                                                                                                                      }
1125   7                                                                                                                      break;
1126   7                                                                                                      case 1:         
1127   7                                                                                                                      if(step_04_load_percent<=89)
1128   7                                                                                                                      {
1129   8                                                                                                                              step_04_load_percent = step_04_load_percent + 10        ;       
1130   8                                                                                                                      }
1131   7                                                                                                                      break;  
1132   7                                                                                              
1133   7                                                                                                      default:break;
1134   7                                                                                              }
1135   6                                                                                      }
1136   5                                                                                      else
1137   5                                                                                      {
1138   6                                                                                              switch(canshu_11_weizhi)
1139   6                                                                                              {
1140   7                                                                                                      case 0:         
1141   7                                                                                                                      if(step_05_load_percent<=99)
1142   7                                                                                                                      {
1143   8                                                                                                                              step_05_load_percent = step_05_load_percent + 1 ;       
1144   8                                                                                                                      }
1145   7                                                                                                                      break;
1146   7                                                                                                      case 1:         
1147   7                                                                                                                      if(step_05_load_percent<=89)
1148   7                                                                                                                      {
1149   8                                                                                                                              step_05_load_percent = step_05_load_percent + 10        ;       
1150   8                                                                                                                      }
1151   7                                                                                                                      break;  
1152   7                                                                                              
1153   7                                                                                                      default:break;
1154   7                                                                                              }       
1155   6                                                                                      }
1156   5                                                                                      
1157   5                                                                      
1158   5                                                                      }
1159   4                                                                      else if(menu_index_q==13)   //参数3设置  节能输出百分比
1160   4                                                                      {
1161   5                                                                                      if(canshu_cnt==1)
1162   5                                                                                      {
1163   6                                                                                              switch(canshu_2_weizhi)
1164   6                                                                                              {
1165   7                                                                                                      case 0:         
1166   7                                                                                                                      if(load_cc_I<=9998)
1167   7                                                                                                                      {
1168   8                                                                                                                              load_cc_I = load_cc_I + 1       ;       
1169   8                                                                                                                      }
1170   7                                                                                                                      break;
C51 COMPILER V9.01   KEY                                                                   03/20/2019 11:22:05 PAGE 20  

1171   7                                                                                                      case 1:         
1172   7                                                                                                                      if(load_cc_I<=9989)
1173   7                                                                                                                      {
1174   8                                                                                                                              load_cc_I = load_cc_I + 10      ;       
1175   8                                                                                                                      }
1176   7                                                                                                                      break;  
1177   7                                                                                                      case 2:         
1178   7                                                                                                                      if(load_cc_I<=9899)
1179   7                                                                                                                      {
1180   8                                                                                                                              load_cc_I = load_cc_I + 100     ;       
1181   8                                                                                                                      }
1182   7                                                                                                                      break;
1183   7                                                                                                      case 3:         
1184   7                                                                                                                      if(load_cc_I<=8999)
1185   7                                                                                                                      {
1186   8                                                                                                                              load_cc_I = load_cc_I + 1000;   
1187   8                                                                                                                      }
1188   7                                                                                                                      break;
1189   7                                                                                                      default:break;
1190   7                                                                                              }       
1191   6                                                                                      }
1192   5                                                                                      else if(canshu_cnt==2)
1193   5                                                                                      {
1194   6                                                                                              switch(canshu_10_weizhi)
1195   6                                                                                              {
1196   7                                                                                                      case 0:         
1197   7                                                                                                                      if(step_04_time_limit<=23)
1198   7                                                                                                                      {
1199   8                                                                                                                              step_04_time_limit = step_04_time_limit + 1     ;       
1200   8                                                                                                                      }
1201   7                                                                                                                      break;
1202   7                                                                                                      case 1:         
1203   7                                                                                                                      if(step_04_time_limit<=13)
1204   7                                                                                                                      {
1205   8                                                                                                                              step_04_time_limit = step_04_time_limit + 10    ;       
1206   8                                                                                                                      }
1207   7                                                                                                                      break;  
1208   7                                                                                              
1209   7                                                                                                      default:break;
1210   7                                                                                              }
1211   6                                                                                      }
1212   5                                                                                      else
1213   5                                                                                      {
1214   6                                                                                              switch(canshu_12_weizhi)
1215   6                                                                                              {
1216   7                                                                                                      case 0:         
1217   7                                                                                                                      if(step_05_time_limit<=23)
1218   7                                                                                                                      {
1219   8                                                                                                                              step_05_time_limit = step_05_time_limit + 1     ;       
1220   8                                                                                                                      }
1221   7                                                                                                                      break;
1222   7                                                                                                      case 1:         
1223   7                                                                                                                      if(step_05_time_limit<=13)
1224   7                                                                                                                      {
1225   8                                                                                                                              step_05_time_limit = step_05_time_limit + 10    ;       
1226   8                                                                                                                      }
1227   7                                                                                                                      break;  
1228   7                                                                                              
1229   7                                                                                                      default:break;
1230   7                                                                                              }       
1231   6                                                                                      }
1232   5                                                                                      
C51 COMPILER V9.01   KEY                                                                   03/20/2019 11:22:05 PAGE 21  

1233   5                                                                      
1234   5                                                                      }
1235   4                                                                      break;
1236   4                                                                      
1237   4                                               case K3://"-"
1238   4                                                                      if(menu_index_q==0x01 && zhuangtai_cnt==0x00)
1239   4                                                                      {
1240   5                                                                              if(day_index>0)
1241   5                                                                              {
1242   6                                                                                      day_index = day_index - 1;
1243   6                                                                              }                                                                       
1244   5                                                                              
1245   5                                                                      }
1246   4                                                                      
1247   4                                                                      if(menu_index_q==0x03)   //参数1设置  光控电压
1248   4                                                                      {
1249   5                                                                                      if(canshu_cnt==1)
1250   5                                                                                      {
1251   6                                                                                              switch(canshu_1_weizhi)
1252   6                                                                                              {
1253   7                                                                                                      case 0:         
1254   7                                                                                                                      if(light_pv>=1)
1255   7                                                                                                                      {
1256   8                                                                                                                              light_pv = light_pv - 1 ;       
1257   8                                                                                                                      }
1258   7                                                                                                                      break;
1259   7                                                                                                      case 1:         
1260   7                                                                                                                      if(light_pv>=10)
1261   7                                                                                                                      {
1262   8                                                                                                                              light_pv = light_pv - 10        ;
1263   8                                                                                                                              
1264   8                                                                                                                              if(light_pv<10)
1265   8                                                                                                                              {
1266   9                                                                                                                                      canshu_1_weizhi=0x00;
1267   9                                                                                                                              }       
1268   8                                                                                                                      }
1269   7                                                                                                                      break;  
1270   7                                                                                                      case 2:         
1271   7                                                                                                                      if(light_pv>=100)
1272   7                                                                                                                      {
1273   8                                                                                                                              light_pv = light_pv - 100       ;
1274   8                                                                                                                              
1275   8                                                                                                                              if(light_pv<100)
1276   8                                                                                                                              {
1277   9                                                                                                                                      canshu_1_weizhi=0x01;
1278   9                                                                                                                              }       
1279   8                                                                                                                      }
1280   7                                                                                                                      break;
1281   7                                                                                                      case 3:         
1282   7                                                                                                                      if(light_pv>=1000)
1283   7                                                                                                                      {
1284   8                                                                                                                              light_pv = light_pv - 1000;     
1285   8                                                                                                                              
1286   8                                                                                                                              if(light_pv<1000)
1287   8                                                                                                                              {
1288   9                                                                                                                                      canshu_1_weizhi=0x02;
1289   9                                                                                                                              }
1290   8                                                                                                                      }
1291   7                                                                                                                      break;
1292   7                                                                                                      default:break;
1293   7                                                                                              }       
1294   6                                                                                      }
C51 COMPILER V9.01   KEY                                                                   03/20/2019 11:22:05 PAGE 22  

1295   5                                                                                      else if(canshu_cnt==2)
1296   5                                                                                      {
1297   6                                                                                              switch(canshu_5_weizhi)
1298   6                                                                                              {
1299   7                                                                                                      case 0:         
1300   7                                                                                                                      if(step_02_load_percent>=1)
1301   7                                                                                                                      {
1302   8                                                                                                                              step_02_load_percent = step_02_load_percent - 1 ;       
1303   8                                                                                                                      }
1304   7                                                                                                                      break;
1305   7                                                                                                      case 1:         
1306   7                                                                                                                      if(step_02_load_percent>=10)
1307   7                                                                                                                      {
1308   8                                                                                                                              step_02_load_percent = step_02_load_percent - 10        ;
1309   8                                                                                                                              
1310   8                                                                                                                              if(step_02_load_percent<10)
1311   8                                                                                                                              {
1312   9                                                                                                                                      canshu_5_weizhi=0x00;
1313   9                                                                                                                              }
1314   8                                                                                                                      }
1315   7                                                                                                                      break;  
1316   7                                                                                              
1317   7                                                                                                      default:break;
1318   7                                                                                              }
1319   6                                                                                      }
1320   5                                                                                      else
1321   5                                                                                      {
1322   6                                                                                              switch(canshu_11_weizhi)
1323   6                                                                                              {
1324   7                                                                                                      case 0:         
1325   7                                                                                                                      if(step_05_load_percent>=1)
1326   7                                                                                                                      {
1327   8                                                                                                                              step_05_load_percent = step_05_load_percent - 1 ;       
1328   8                                                                                                                      }
1329   7                                                                                                                      break;
1330   7                                                                                                      case 1:         
1331   7                                                                                                                      if(step_05_load_percent>=10)
1332   7                                                                                                                      {
1333   8                                                                                                                              step_05_load_percent = step_05_load_percent - 10        ;
1334   8                                                                                                                              
1335   8                                                                                                                              if(step_05_load_percent<10)
1336   8                                                                                                                              {
1337   9                                                                                                                                      canshu_11_weizhi=0x00;
1338   9                                                                                                                              }
1339   8                                                                                                                      }
1340   7                                                                                                                      break;  
1341   7                                                                                              
1342   7                                                                                                      default:break;
1343   7                                                                                              }
1344   6                                                                                      }
1345   5                                                                                      
1346   5                                                                      
1347   5                                                                      }
1348   4                                                                      else if(menu_index_q==0x05)   //参数2设置  负载电流
1349   4                                                                      {
1350   5                                                                                      if(canshu_cnt==1)
1351   5                                                                                      {
1352   6                                                                                              switch(canshu_2_weizhi)
1353   6                                                                                              {
1354   7                                                                                                      case 0:         
1355   7                                                                                                                      if(load_cc_I>=1)
1356   7                                                                                                                      {
C51 COMPILER V9.01   KEY                                                                   03/20/2019 11:22:05 PAGE 23  

1357   8                                                                                                                              load_cc_I = load_cc_I - 1       ;       
1358   8                                                                                                                      }
1359   7                                                                                                                      break;
1360   7                                                                                                      case 1:         
1361   7                                                                                                                      if(load_cc_I>=10)
1362   7                                                                                                                      {
1363   8                                                                                                                              load_cc_I = load_cc_I - 10      ;
1364   8                                                                                                                              
1365   8                                                                                                                              if(load_cc_I<10)
1366   8                                                                                                                              {
1367   9                                                                                                                                      canshu_2_weizhi=0x00;
1368   9                                                                                                                              }       
1369   8                                                                                                                      }
1370   7                                                                                                                      break;  
1371   7                                                                                                      case 2:         
1372   7                                                                                                                      if(load_cc_I>=100)
1373   7                                                                                                                      {
1374   8                                                                                                                              load_cc_I = load_cc_I - 100     ;
1375   8                                                                                                                              
1376   8                                                                                                                              if(load_cc_I<100)
1377   8                                                                                                                              {
1378   9                                                                                                                                      canshu_2_weizhi=0x01;
1379   9                                                                                                                              }       
1380   8                                                                                                                      }
1381   7                                                                                                                      break;
1382   7                                                                                                      case 3:         
1383   7                                                                                                                      if(load_cc_I>=1000)
1384   7                                                                                                                      {
1385   8                                                                                                                              load_cc_I = load_cc_I - 1000;   
1386   8                                                                                                                              
1387   8                                                                                                                              if(load_cc_I<1000)
1388   8                                                                                                                              {
1389   9                                                                                                                                      canshu_2_weizhi=0x02;
1390   9                                                                                                                              }
1391   8                                                                                                                      }
1392   7                                                                                                                      break;
1393   7                                                                                                      default:break;
1394   7                                                                                              }       
1395   6                                                                                      }
1396   5                                                                                      else if(canshu_cnt==2)
1397   5                                                                                      {
1398   6                                                                                              switch(canshu_6_weizhi)
1399   6                                                                                              {
1400   7                                                                                                      case 0:         
1401   7                                                                                                                      if(step_02_time_limit>=1)
1402   7                                                                                                                      {
1403   8                                                                                                                              step_02_time_limit = step_02_time_limit - 1     ;       
1404   8                                                                                                                      }
1405   7                                                                                                                      break;
1406   7                                                                                                      case 1:         
1407   7                                                                                                                      if(step_02_time_limit>=10)
1408   7                                                                                                                      {
1409   8                                                                                                                              step_02_time_limit = step_02_time_limit - 10    ;
1410   8                                                                                                                              
1411   8                                                                                                                              if(step_02_time_limit<10)
1412   8                                                                                                                              {
1413   9                                                                                                                                      canshu_6_weizhi=0x00;
1414   9                                                                                                                              }
1415   8                                                                                                                      }
1416   7                                                                                                                      break;  
1417   7                                                                                              
1418   7                                                                                                      default:break;
C51 COMPILER V9.01   KEY                                                                   03/20/2019 11:22:05 PAGE 24  

1419   7                                                                                              }
1420   6                                                                                      }
1421   5                                                                                      else
1422   5                                                                                      {
1423   6                                                                                              switch(canshu_12_weizhi)
1424   6                                                                                              {
1425   7                                                                                                      case 0:         
1426   7                                                                                                                      if(step_05_time_limit>=1)
1427   7                                                                                                                      {
1428   8                                                                                                                              step_05_time_limit = step_05_time_limit - 1     ;       
1429   8                                                                                                                      }
1430   7                                                                                                                      break;
1431   7                                                                                                      case 1:         
1432   7                                                                                                                      if(step_05_time_limit>=10)
1433   7                                                                                                                      {
1434   8                                                                                                                              step_05_time_limit = step_05_time_limit - 10    ;
1435   8                                                                                                                              
1436   8                                                                                                                              if(step_05_time_limit<10)
1437   8                                                                                                                              {
1438   9                                                                                                                                      canshu_12_weizhi=0x00;
1439   9                                                                                                                              }
1440   8                                                                                                                      }
1441   7                                                                                                                      break;  
1442   7                                                                                              
1443   7                                                                                                      default:break;
1444   7                                                                                              }
1445   6                                                                                      }
1446   5                                                                                      
1447   5                                                                      
1448   5                                                                      }
1449   4                                                                      else if(menu_index_q==0x07)   //参数3设置  节能输出百分比
1450   4                                                                      {
1451   5                                                                                      if(canshu_cnt==1)
1452   5                                                                                      {
1453   6                                                                                              switch(canshu_3_weizhi)
1454   6                                                                                              {
1455   7                                                                                                      case 0:         
1456   7                                                                                                                      if(step_01_load_percent>=1)
1457   7                                                                                                                      {
1458   8                                                                                                                              step_01_load_percent = step_01_load_percent - 1 ;       
1459   8                                                                                                                      }
1460   7                                                                                                                      break;
1461   7                                                                                                      case 1:         
1462   7                                                                                                                      if(step_01_load_percent>=10)
1463   7                                                                                                                      {
1464   8                                                                                                                              step_01_load_percent = step_01_load_percent - 10        ;
1465   8                                                                                                                              
1466   8                                                                                                                              if(step_01_load_percent<10)
1467   8                                                                                                                              {
1468   9                                                                                                                                      canshu_3_weizhi=0x00;
1469   9                                                                                                                              }
1470   8                                                                                                                      }
1471   7                                                                                                                      break;  
1472   7                                                                                              
1473   7                                                                                                      default:break;
1474   7                                                                                              }
1475   6                                                                                      }
1476   5                                                                                      else if(canshu_cnt==2)
1477   5                                                                                      {
1478   6                                                                                              switch(canshu_7_weizhi)
1479   6                                                                                              {
1480   7                                                                                                      case 0:         
C51 COMPILER V9.01   KEY                                                                   03/20/2019 11:22:05 PAGE 25  

1481   7                                                                                                                      if(step_03_load_percent>=1)
1482   7                                                                                                                      {
1483   8                                                                                                                              step_03_load_percent = step_03_load_percent - 1 ;       
1484   8                                                                                                                      }
1485   7                                                                                                                      break;
1486   7                                                                                                      case 1:         
1487   7                                                                                                                      if(step_03_load_percent>=10)
1488   7                                                                                                                      {
1489   8                                                                                                                              step_03_load_percent = step_03_load_percent - 10        ;
1490   8                                                                                                                              
1491   8                                                                                                                              if(step_03_load_percent<10)
1492   8                                                                                                                              {
1493   9                                                                                                                                      canshu_7_weizhi=0x00;
1494   9                                                                                                                              }
1495   8                                                                                                                      }
1496   7                                                                                                                      break;  
1497   7                                                                                              
1498   7                                                                                                      default:break;
1499   7                                                                                              }
1500   6                                                                                      }
1501   5                                                                                      else
1502   5                                                                                      {
1503   6                                                                                              switch(canshu_13_weizhi)
1504   6                                                                                              {
1505   7                                                                                                      case 0:         
1506   7                                                                                                                      if(bt_id>=1)
1507   7                                                                                                                      {
1508   8                                                                                                                              bt_id = bt_id - 1       ;       
1509   8                                                                                                                      }
1510   7                                                                                                                      break;
1511   7                                                                                                      case 1:         
1512   7                                                                                                                      if(bt_id>=10)
1513   7                                                                                                                      {
1514   8                                                                                                                              bt_id = bt_id - 10      ;
1515   8                                                                                                                              
1516   8                                                                                                                              if(bt_id<10)
1517   8                                                                                                                              {
1518   9                                                                                                                                      canshu_13_weizhi=0x00;
1519   9                                                                                                                              }
1520   8                                                                                                                      }
1521   7                                                                                                                      break;  
1522   7                                                                                              
1523   7                                                                                                      default:break;
1524   7                                                                                              }
1525   6                                                                                      }
1526   5                                                                                      
1527   5                                                                      
1528   5                                                                      }
1529   4                                                                      else if(menu_index_q==0x09)   //参数3设置  节能输出百分比
1530   4                                                                      {
1531   5                                                                                      if(canshu_cnt==1)
1532   5                                                                                      {
1533   6                                                                                              switch(canshu_4_weizhi)
1534   6                                                                                              {
1535   7                                                                                                      case 0:         
1536   7                                                                                                                      if(step_01_time_limit>=1)
1537   7                                                                                                                      {
1538   8                                                                                                                              step_01_time_limit = step_01_time_limit - 1     ;       
1539   8                                                                                                                      }
1540   7                                                                                                                      break;
1541   7                                                                                                      case 1:         
1542   7                                                                                                                      if(step_01_time_limit>=10)
C51 COMPILER V9.01   KEY                                                                   03/20/2019 11:22:05 PAGE 26  

1543   7                                                                                                                      {
1544   8                                                                                                                              step_01_time_limit = step_01_time_limit - 10    ;
1545   8                                                                                                                              
1546   8                                                                                                                              if(step_01_time_limit<10)
1547   8                                                                                                                              {
1548   9                                                                                                                                      canshu_4_weizhi=0x00;
1549   9                                                                                                                              }
1550   8                                                                                                                      }
1551   7                                                                                                                      break;  
1552   7                                                                                              
1553   7                                                                                                      default:break;
1554   7                                                                                              }
1555   6                                                                                      }
1556   5                                                                                      else if(canshu_cnt==2)
1557   5                                                                                      {
1558   6                                                                                              switch(canshu_8_weizhi)
1559   6                                                                                              {
1560   7                                                                                                      case 0:         
1561   7                                                                                                                      if(step_03_time_limit>=1)
1562   7                                                                                                                      {
1563   8                                                                                                                              step_03_time_limit = step_03_time_limit - 1     ;       
1564   8                                                                                                                      }
1565   7                                                                                                                      break;
1566   7                                                                                                      case 1:         
1567   7                                                                                                                      if(step_03_time_limit>=10)
1568   7                                                                                                                      {
1569   8                                                                                                                              step_03_time_limit = step_03_time_limit - 10    ;
1570   8                                                                                                                              
1571   8                                                                                                                              if(step_03_time_limit<10)
1572   8                                                                                                                              {
1573   9                                                                                                                                      canshu_8_weizhi=0x00;
1574   9                                                                                                                              }
1575   8                                                                                                                      }
1576   7                                                                                                                      break;  
1577   7                                                                                              
1578   7                                                                                                      default:break;
1579   7                                                                                              }
1580   6                                                                                      }
1581   5                                                                                      else
1582   5                                                                                      {
1583   6                                                                                              switch(canshu_14_weizhi)
1584   6                                                                                              {
1585   7                                                                                                      case 0:         
1586   7                                                                                                                      if(light_time>=1)
1587   7                                                                                                                      {
1588   8                                                                                                                              light_time = light_time - 1     ;       
1589   8                                                                                                                      }
1590   7                                                                                                                      break;
1591   7                                                                                                      case 1:         
1592   7                                                                                                                      if(light_time>=10)
1593   7                                                                                                                      {
1594   8                                                                                                                              light_time = light_time - 10    ;
1595   8                                                                                                                              
1596   8                                                                                                                              if(light_time<10)
1597   8                                                                                                                              {
1598   9                                                                                                                                      canshu_14_weizhi=0x00;
1599   9                                                                                                                              }
1600   8                                                                                                                      }
1601   7                                                                                                                      break;  
1602   7                                                                                              
1603   7                                                                                                      default:break;
1604   7                                                                                              }
C51 COMPILER V9.01   KEY                                                                   03/20/2019 11:22:05 PAGE 27  

1605   6                                                                                      }
1606   5                                                                                      
1607   5                                                                      
1608   5                                                                      }
1609   4                                                                      else if(menu_index_q==11)   //参数3设置  节能输出百分比
1610   4                                                                      {
1611   5                                                                                      if(canshu_cnt==1)
1612   5                                                                                      {
1613   6                                                                                              switch(canshu_1_weizhi)
1614   6                                                                                              {
1615   7                                                                                                      case 0:         
1616   7                                                                                                                      if(light_pv>=1)
1617   7                                                                                                                      {
1618   8                                                                                                                              light_pv = light_pv - 1 ;       
1619   8                                                                                                                      }
1620   7                                                                                                                      break;
1621   7                                                                                                      case 1:         
1622   7                                                                                                                      if(light_pv>=10)
1623   7                                                                                                                      {
1624   8                                                                                                                              light_pv = light_pv - 10        ;
1625   8                                                                                                                              
1626   8                                                                                                                              if(light_pv<10)
1627   8                                                                                                                              {
1628   9                                                                                                                                      canshu_1_weizhi=0x00;
1629   9                                                                                                                              }       
1630   8                                                                                                                      }
1631   7                                                                                                                      break;  
1632   7                                                                                                      case 2:         
1633   7                                                                                                                      if(light_pv>=100)
1634   7                                                                                                                      {
1635   8                                                                                                                              light_pv = light_pv - 100       ;
1636   8                                                                                                                              
1637   8                                                                                                                              if(light_pv<100)
1638   8                                                                                                                              {
1639   9                                                                                                                                      canshu_1_weizhi=0x01;
1640   9                                                                                                                              }       
1641   8                                                                                                                      }
1642   7                                                                                                                      break;
1643   7                                                                                                      case 3:         
1644   7                                                                                                                      if(light_pv>=1000)
1645   7                                                                                                                      {
1646   8                                                                                                                              light_pv = light_pv - 1000;     
1647   8                                                                                                                              
1648   8                                                                                                                              if(light_pv<1000)
1649   8                                                                                                                              {
1650   9                                                                                                                                      canshu_1_weizhi=0x02;
1651   9                                                                                                                              }
1652   8                                                                                                                      }
1653   7                                                                                                                      break;
1654   7                                                                                                      default:break;
1655   7                                                                                              }       
1656   6                                                                                      }
1657   5                                                                                      else if(canshu_cnt==2)
1658   5                                                                                      {
1659   6                                                                                              switch(canshu_9_weizhi)
1660   6                                                                                              {
1661   7                                                                                                      case 0:         
1662   7                                                                                                                      if(step_04_load_percent>=1)
1663   7                                                                                                                      {
1664   8                                                                                                                              step_04_load_percent = step_04_load_percent - 1 ;       
1665   8                                                                                                                      }
1666   7                                                                                                                      break;
C51 COMPILER V9.01   KEY                                                                   03/20/2019 11:22:05 PAGE 28  

1667   7                                                                                                      case 1:         
1668   7                                                                                                                      if(step_04_load_percent>=10)
1669   7                                                                                                                      {
1670   8                                                                                                                              step_04_load_percent = step_04_load_percent - 10        ;
1671   8                                                                                                                              
1672   8                                                                                                                              if(step_04_load_percent<10)
1673   8                                                                                                                              {
1674   9                                                                                                                                      canshu_9_weizhi=0x00;
1675   9                                                                                                                              }
1676   8                                                                                                                      }
1677   7                                                                                                                      break;  
1678   7                                                                                              
1679   7                                                                                                      default:break;
1680   7                                                                                              }
1681   6                                                                                      }
1682   5                                                                                      else
1683   5                                                                                      {
1684   6                                                                                              switch(canshu_11_weizhi)
1685   6                                                                                              {
1686   7                                                                                                      case 0:         
1687   7                                                                                                                      if(step_05_load_percent>=1)
1688   7                                                                                                                      {
1689   8                                                                                                                              step_05_load_percent = step_05_load_percent - 1 ;       
1690   8                                                                                                                      }
1691   7                                                                                                                      break;
1692   7                                                                                                      case 1:         
1693   7                                                                                                                      if(step_05_load_percent>=10)
1694   7                                                                                                                      {
1695   8                                                                                                                              step_05_load_percent = step_05_load_percent - 10        ;
1696   8                                                                                                                              
1697   8                                                                                                                              if(step_05_load_percent<10)
1698   8                                                                                                                              {
1699   9                                                                                                                                      canshu_11_weizhi=0x00;
1700   9                                                                                                                              }
1701   8                                                                                                                      }
1702   7                                                                                                                      break;  
1703   7                                                                                              
1704   7                                                                                                      default:break;
1705   7                                                                                              }
1706   6                                                                                      }
1707   5                                                                                      
1708   5                                                                      
1709   5                                                                      }
1710   4                                                                      else if(menu_index_q==13)   //参数3设置  节能输出百分比
1711   4                                                                      {
1712   5                                                                                      if(canshu_cnt==1)
1713   5                                                                                      {
1714   6                                                                                              switch(canshu_2_weizhi)
1715   6                                                                                              {
1716   7                                                                                                      case 0:         
1717   7                                                                                                                      if(load_cc_I>=1)
1718   7                                                                                                                      {
1719   8                                                                                                                              load_cc_I = load_cc_I - 1       ;       
1720   8                                                                                                                      }
1721   7                                                                                                                      break;
1722   7                                                                                                      case 1:         
1723   7                                                                                                                      if(load_cc_I>=10)
1724   7                                                                                                                      {
1725   8                                                                                                                              load_cc_I = load_cc_I - 10      ;
1726   8                                                                                                                              
1727   8                                                                                                                              if(load_cc_I<10)
1728   8                                                                                                                              {
C51 COMPILER V9.01   KEY                                                                   03/20/2019 11:22:05 PAGE 29  

1729   9                                                                                                                                      canshu_2_weizhi=0x00;
1730   9                                                                                                                              }       
1731   8                                                                                                                      }
1732   7                                                                                                                      break;  
1733   7                                                                                                      case 2:         
1734   7                                                                                                                      if(load_cc_I>=100)
1735   7                                                                                                                      {
1736   8                                                                                                                              load_cc_I = load_cc_I - 100     ;
1737   8                                                                                                                              
1738   8                                                                                                                              if(load_cc_I<100)
1739   8                                                                                                                              {
1740   9                                                                                                                                      canshu_2_weizhi=0x01;
1741   9                                                                                                                              }       
1742   8                                                                                                                      }
1743   7                                                                                                                      break;
1744   7                                                                                                      case 3:         
1745   7                                                                                                                      if(load_cc_I>=1000)
1746   7                                                                                                                      {
1747   8                                                                                                                              load_cc_I = load_cc_I - 1000;   
1748   8                                                                                                                              
1749   8                                                                                                                              if(load_cc_I<1000)
1750   8                                                                                                                              {
1751   9                                                                                                                                      canshu_2_weizhi=0x02;
1752   9                                                                                                                              }
1753   8                                                                                                                      }
1754   7                                                                                                                      break;
1755   7                                                                                                      default:break;
1756   7                                                                                              }       
1757   6                                                                                      }
1758   5                                                                                      else if(canshu_cnt==2)
1759   5                                                                                      {
1760   6                                                                                              switch(canshu_10_weizhi)
1761   6                                                                                              {
1762   7                                                                                                      case 0:         
1763   7                                                                                                                      if(step_04_time_limit>=1)
1764   7                                                                                                                      {
1765   8                                                                                                                              step_04_time_limit = step_04_time_limit - 1     ;       
1766   8                                                                                                                      }
1767   7                                                                                                                      break;
1768   7                                                                                                      case 1:         
1769   7                                                                                                                      if(step_04_time_limit>=10)
1770   7                                                                                                                      {
1771   8                                                                                                                              step_04_time_limit = step_04_time_limit - 10    ;
1772   8                                                                                                                              
1773   8                                                                                                                              if(step_04_time_limit<10)
1774   8                                                                                                                              {
1775   9                                                                                                                                      canshu_10_weizhi=0x00;
1776   9                                                                                                                              }
1777   8                                                                                                                      }
1778   7                                                                                                                      break;  
1779   7                                                                                              
1780   7                                                                                                      default:break;
1781   7                                                                                              }
1782   6                                                                                      }
1783   5                                                                                      else
1784   5                                                                                      {
1785   6                                                                                              switch(canshu_12_weizhi)
1786   6                                                                                              {
1787   7                                                                                                      case 0:         
1788   7                                                                                                                      if(step_05_time_limit>=1)
1789   7                                                                                                                      {
1790   8                                                                                                                              step_05_time_limit = step_05_time_limit - 1     ;       
C51 COMPILER V9.01   KEY                                                                   03/20/2019 11:22:05 PAGE 30  

1791   8                                                                                                                      }
1792   7                                                                                                                      break;
1793   7                                                                                                      case 1:         
1794   7                                                                                                                      if(step_05_time_limit>=10)
1795   7                                                                                                                      {
1796   8                                                                                                                              step_05_time_limit = step_05_time_limit - 10    ;
1797   8                                                                                                                              
1798   8                                                                                                                              if(step_05_time_limit<10)
1799   8                                                                                                                              {
1800   9                                                                                                                                      canshu_12_weizhi=0x00;
1801   9                                                                                                                              }
1802   8                                                                                                                      }
1803   7                                                                                                                      break;  
1804   7                                                                                              
1805   7                                                                                                      default:break;
1806   7                                                                                              }
1807   6                                                                                      }
1808   5                                                                                      
1809   5                                                                      
1810   5                                                                      }
1811   4                                                                      break;
1812   4                                               
1813   4                                               default:break;
1814   4                                                              
1815   4                               }
1816   3                              
1817   3      
1818   3                       KEY_VALUE=KNOP;
1819   3                       
1820   3                       system_power_on_time_count=0x00;  //每次有效按键清除开机变量数值
1821   3              
1822   3                       BEEP_SPEAK();
1823   3                       
1824   3                     }
1825   2              
1826   2                  }
1827   1                  
1828   1                  
1829   1                  if(menu_index_q==0x03)
1830   1                        {
1831   2                                      if((KEY_VALUE ==K8)&&(KEY_STATE == KEY_DOWN))     //    长按“设置”键
1832   2                                      {
1833   3                                              if(key1_time_count<15)
1834   3                                              {
1835   4                                                key1_time_count++;
1836   4                                                              
1837   4                                              }
1838   3                                              else
1839   3                                              {
1840   4                                                      key1_time_count=0x00;
1841   4                                                      
1842   4                                                      if(canshu_cnt==1)
1843   4                                                      {
1844   5                                                              canshu_1_weizhi=0x00;
1845   5                                                      }
1846   4                                                      else if(canshu_cnt==2)
1847   4                                                      {
1848   5                                                              canshu_5_weizhi=0x00;
1849   5                                                      }
1850   4                                                      else
1851   4                                                      {
1852   5                                                              canshu_11_weizhi=0x00;
C51 COMPILER V9.01   KEY                                                                   03/20/2019 11:22:05 PAGE 31  

1853   5                                                      }
1854   4                                                      
1855   4                                                      menu_index_q=0x04;
1856   4                                                      
1857   4                                                      BEEP_SPEAK();
1858   4                                              }
1859   3                                      }
1860   2                                      else
1861   2                                      {
1862   3                                                      key1_time_count=0x00;
1863   3              
1864   3                                              
1865   3                                      }
1866   2                        }
1867   1                        else if(menu_index_q==0x05)
1868   1                        {
1869   2                                      if((KEY_VALUE ==K8)&&(KEY_STATE == KEY_DOWN))
1870   2                                      {
1871   3                                              if(key1_time_count<15)
1872   3                                              {
1873   4                                                key1_time_count++;
1874   4                                                              
1875   4                                              }
1876   3                                              else
1877   3                                              {
1878   4                                                      key1_time_count=0x00;
1879   4                                                      
1880   4                                                      if(canshu_cnt==1)
1881   4                                                      {
1882   5                                                              canshu_2_weizhi=0x00;
1883   5                                                      }
1884   4                                                      else if(canshu_cnt==2)
1885   4                                                      {
1886   5                                                              canshu_6_weizhi=0x00;
1887   5                                                      }
1888   4                                                      else
1889   4                                                      {
1890   5                                                              canshu_12_weizhi=0x00;
1891   5                                                      }
1892   4                                                      
1893   4                                                      menu_index_q=0x06;
1894   4                                                      
1895   4                                                      BEEP_SPEAK();
1896   4                                              }
1897   3                                      }
1898   2                                      else
1899   2                                      {
1900   3                                                      key1_time_count=0x00;
1901   3              
1902   3                                                      
1903   3                                      }
1904   2                        }
1905   1                        else if(menu_index_q==0x07)
1906   1                        {
1907   2                                      if((KEY_VALUE ==K8)&&(KEY_STATE == KEY_DOWN))
1908   2                                      {
1909   3                                              if(key1_time_count<15)
1910   3                                              {
1911   4                                                key1_time_count++;
1912   4                                                              
1913   4                                              }
1914   3                                              else
C51 COMPILER V9.01   KEY                                                                   03/20/2019 11:22:05 PAGE 32  

1915   3                                              {
1916   4                                                      key1_time_count=0x00;
1917   4                                                      
1918   4                                                      if(canshu_cnt==1)
1919   4                                                      {
1920   5                                                               canshu_3_weizhi=0x00;
1921   5                                                      }
1922   4                                                      else if(canshu_cnt==2)
1923   4                                                      {
1924   5                                                               canshu_7_weizhi=0x00;
1925   5                                                      }
1926   4                                                      else
1927   4                                                      {
1928   5                                                               canshu_13_weizhi=0x00;
1929   5                                                      }
1930   4                                                      
1931   4                                                      menu_index_q=0x08;
1932   4                                                      
1933   4                                                      BEEP_SPEAK();
1934   4                                              }
1935   3                                      }
1936   2                                      else
1937   2                                      {
1938   3                                                      key1_time_count=0x00;
1939   3              
1940   3                                                      
1941   3                                      }
1942   2                        }
1943   1                        else if(menu_index_q==0x09)
1944   1                        {
1945   2                                      if((KEY_VALUE ==K8)&&(KEY_STATE == KEY_DOWN))
1946   2                                      {
1947   3                                              if(key1_time_count<15)
1948   3                                              {
1949   4                                                key1_time_count++;
1950   4                                                              
1951   4                                              }
1952   3                                              else
1953   3                                              {
1954   4                                                      key1_time_count=0x00;
1955   4                                                      
1956   4                                                      if(canshu_cnt==1)
1957   4                                                      {
1958   5                                                               canshu_4_weizhi=0x00;
1959   5                                                      }
1960   4                                                      else if(canshu_cnt==2)
1961   4                                                      {
1962   5                                                               canshu_8_weizhi=0x00;
1963   5                                                      }
1964   4                                                      else
1965   4                                                      {
1966   5                                                               canshu_14_weizhi=0x00;
1967   5                                                      }
1968   4                                                      
1969   4                                                      menu_index_q=10;
1970   4                                                      
1971   4                                                      BEEP_SPEAK();
1972   4                                              }
1973   3                                      }
1974   2                                      else
1975   2                                      {
1976   3                                                      key1_time_count=0x00;
C51 COMPILER V9.01   KEY                                                                   03/20/2019 11:22:05 PAGE 33  

1977   3              
1978   3                                                      
1979   3                                      }
1980   2                        }
1981   1                        else if(menu_index_q==11)
1982   1                        {
1983   2                                      if((KEY_VALUE ==K8)&&(KEY_STATE == KEY_DOWN))
1984   2                                      {
1985   3                                              if(key1_time_count<15)
1986   3                                              {
1987   4                                                key1_time_count++;
1988   4                                                              
1989   4                                              }
1990   3                                              else
1991   3                                              {
1992   4                                                      key1_time_count=0x00;
1993   4                                                      
1994   4                                                      if(canshu_cnt==1)
1995   4                                                      {
1996   5                                                               canshu_1_weizhi=0x00;
1997   5                                                      }
1998   4                                                      else if(canshu_cnt==2)
1999   4                                                      {
2000   5                                                               canshu_9_weizhi=0x00;
2001   5                                                      }
2002   4                                                      else
2003   4                                                      {
2004   5                                                               canshu_11_weizhi=0x00;
2005   5                                                      }
2006   4                                                      
2007   4                                                      menu_index_q=12;
2008   4                                                      
2009   4                                                      BEEP_SPEAK();
2010   4                                              }
2011   3                                      }
2012   2                                      else
2013   2                                      {
2014   3                                                      key1_time_count=0x00;
2015   3              
2016   3                                                      
2017   3                                      }
2018   2                        }
2019   1                        else if(menu_index_q==13)
2020   1                        {
2021   2                                      if((KEY_VALUE ==K8)&&(KEY_STATE == KEY_DOWN))
2022   2                                      {
2023   3                                              if(key1_time_count<15)
2024   3                                              {
2025   4                                                key1_time_count++;
2026   4                                                              
2027   4                                              }
2028   3                                              else
2029   3                                              {
2030   4                                                      key1_time_count=0x00;
2031   4                                                      
2032   4                                                      if(canshu_cnt==1)
2033   4                                                      {
2034   5                                                               canshu_2_weizhi=0x00;
2035   5                                                      }
2036   4                                                      else if(canshu_cnt==2)
2037   4                                                      {
2038   5                                                               canshu_10_weizhi=0x00;
C51 COMPILER V9.01   KEY                                                                   03/20/2019 11:22:05 PAGE 34  

2039   5                                                      }
2040   4                                                      else
2041   4                                                      {
2042   5                                                               canshu_12_weizhi=0x00;
2043   5                                                      }
2044   4                                                      
2045   4                                                      menu_index_q=0x02;
2046   4                                                      
2047   4                                                      BEEP_SPEAK();
2048   4                                              }
2049   3                                      }
2050   2                                      else
2051   2                                      {
2052   3                                                      key1_time_count=0x00;
2053   3              
2054   3                                                      
2055   3                                      }
2056   2                        }
2057   1              
2058   1      }
2059          
2060          
2061          
2062          
2063          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   7609    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =     31    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =     12    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
